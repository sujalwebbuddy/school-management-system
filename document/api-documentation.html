<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>API Documentation – SchoolHub Platform</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="./styles.css" />
    <script defer src="./script.js"></script>
  </head>
  <body>
    <aside class="sidebar">
      <div class="brand">
        <img src="./screenshots/logo.svg" alt="SchoolHub Logo" />
        <div>
          <h1>SchoolHub Platform</h1>
          <p>API Documentation</p>
        </div>
      </div>
      <nav>
        <a href="./index.html">Welcome</a>
        <a href="./how-to-use.html">User Guide</a>
        <a href="./technical-overview.html">Technical Overview</a>
        <a href="./api-documentation.html" class="active">API Documentation</a>
        <a href="./push-to-github.html">How to push to GitHub</a>
        <a href="./install-vercel.html">How to install on Vercel</a>
        <a href="./install-aws-ec2.html">How to install on AWS EC2</a>
        <a href="./database.html">How to setup Authentication</a>
        <a href="./mongodb-setup.html">How to create MongoDB Database</a>
        <a href="./env-setup.html">Environment Variables</a>
        <a href="./frontend-updates.html">Frontend Customization</a>
        <a href="./pricing-and-validations.html">User Roles & Permissions</a>
      </nav>
      <footer>
        <small>REST API Reference v1.0</small>
      </footer>
    </aside>

    <main class="content">
      <header class="topbar">
        <h2>API Documentation</h2>
      </header>

      <section class="prose">
        <div class="callout info">
          <strong><svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg> Complete API Reference:</strong> Comprehensive documentation for all SchoolHub Platform REST API endpoints including authentication, user management, chat, tasks, exams, attendance, and AI services. All endpoints require proper authentication unless otherwise noted.
        </div>

        <h2><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg> Authentication</h2>

        <h3>JWT Authentication</h3>
        <p>All API requests require JWT authentication in the Authorization header unless otherwise specified.</p>

        <div class="code"><pre><code>Authorization: Bearer &lt;jwt_token&gt;</code></pre></div>

        <h4>POST /api/v1/users/login</h4>
        <p>User authentication endpoint.</p>
        <div class="code"><pre><code>POST /api/v1/users/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123"
}

Response:
{
  "success": true,
  "token": "jwt_token_here",
  "user": {
    "id": "user_id",
    "firstName": "John",
    "lastName": "Doe",
    "email": "user@example.com",
    "role": "student"
  }
}</code></pre></div>

        <h4>POST /api/v1/users/register</h4>
        <p>User registration endpoint (requires admin approval).</p>
        <div class="code"><pre><code>POST /api/v1/users/register
Content-Type: application/json

{
  "firstName": "John",
  "lastName": "Doe",
  "email": "user@example.com",
  "password": "password123",
  "phoneNumber": "+1234567890",
  "role": "student"
}

Response:
{
  "success": true,
  "message": "Registration successful. Please wait for admin approval."
}</code></pre></div>

        <h2><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg> User Management</h2>

        <h4>GET /api/v1/users/profile</h4>
        <p>Get current user profile information.</p>
        <div class="code"><pre><code>GET /api/v1/users/profile
Authorization: Bearer &lt;jwt_token&gt;

Response:
{
  "success": true,
  "user": {
    "id": "user_id",
    "firstName": "John",
    "lastName": "Doe",
    "email": "user@example.com",
    "role": "student",
    "organizationId": "org_id",
    "profileImage": "image_url"
  }
}</code></pre></div>

        <h4>PUT /api/v1/users/profile</h4>
        <p>Update user profile information.</p>
        <div class="code"><pre><code>PUT /api/v1/users/profile
Authorization: Bearer &lt;jwt_token&gt;
Content-Type: application/json

{
  "firstName": "John",
  "lastName": "Smith",
  "phoneNumber": "+1234567890"
}

Response:
{
  "success": true,
  "message": "Profile updated successfully"
}</code></pre></div>

        <h4>GET /api/v1/admin/users</h4>
        <p>Get all users (Admin only).</p>
        <div class="code"><pre><code>GET /api/v1/admin/users
Authorization: Bearer &lt;jwt_token&gt;

Response:
{
  "success": true,
  "users": [
    {
      "id": "user_id",
      "firstName": "John",
      "lastName": "Doe",
      "email": "user@example.com",
      "role": "student",
      "isApproved": true,
      "organizationId": "org_id"
    }
  ]
}</code></pre></div>

        <h4>PUT /api/v1/admin/users/:id/approve</h4>
        <p>Approve user registration (Admin only).</p>
        <div class="code"><pre><code>PUT /api/v1/admin/users/:id/approve
Authorization: Bearer &lt;jwt_token&gt;

Response:
{
  "success": true,
  "message": "User approved successfully"
}</code></pre></div>

        <h2><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg> Organization Management</h2>

        <h4>GET /api/v1/organizations</h4>
        <p>Get organization information.</p>
        <div class="code"><pre><code>GET /api/v1/organizations
Authorization: Bearer &lt;jwt_token&gt;

Response:
{
  "success": true,
  "organization": {
    "id": "org_id",
    "name": "School Name",
    "domain": "schoolname",
    "subscriptionTier": "high_school",
    "subscriptionStatus": "active",
    "maxUsers": 500,
    "features": ["basic", "standard", "chat", "attendance", "exams", "homework", "analytics"]
  }
}</code></pre></div>

        <h4>POST /api/v1/organizations</h4>
        <p>Create new organization (Super Admin only).</p>
        <div class="code"><pre><code>POST /api/v1/organizations
Authorization: Bearer &lt;jwt_token&gt;
Content-Type: application/json

{
  "name": "New School",
  "domain": "newschool",
  "subscriptionTier": "primary",
  "adminEmail": "admin@newschool.com"
}

Response:
{
  "success": true,
  "organization": { ... },
  "adminCredentials": {
    "email": "admin@newschool.com",
    "password": "generated_password"
  }
}</code></pre></div>

        <h2><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg> Class Management</h2>

        <h4>GET /api/v1/admin/classes</h4>
        <p>Get all classes in organization (Admin only).</p>
        <div class="code"><pre><code>GET /api/v1/admin/classes
Authorization: Bearer &lt;jwt_token&gt;

Response:
{
  "success": true,
  "classes": [
    {
      "id": "class_id",
      "className": "Grade 10A",
      "organizationId": "org_id",
      "subjects": ["subject_id_1", "subject_id_2"],
      "studentCount": 25
    }
  ]
}</code></pre></div>

        <h4>POST /api/v1/admin/classes</h4>
        <p>Create new class (Admin only).</p>
        <div class="code"><pre><code>POST /api/v1/admin/classes
Authorization: Bearer &lt;jwt_token&gt;
Content-Type: application/json

{
  "className": "Grade 11B",
  "subjects": ["math_subject_id", "science_subject_id"]
}

Response:
{
  "success": true,
  "class": { ... }
}</code></pre></div>

        <h2><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg> Homework Management</h2>

        <h4>GET /api/v1/teacher/homework</h4>
        <p>Get homework assignments for teacher's subjects.</p>
        <div class="code"><pre><code>GET /api/v1/teacher/homework
Authorization: Bearer &lt;jwt_token&gt;

Response:
{
  "success": true,
  "homework": [
    {
      "id": "homework_id",
      "name": "Algebra Assignment 1",
      "description": "Solve quadratic equations",
      "subjectId": "math_subject_id",
      "classId": "class_id",
      "dateOf": "2024-01-15T00:00:00.000Z",
      "optionA": "Answer A",
      "optionB": "Answer B",
      "optionC": "Answer C",
      "optionD": "Answer D",
      "correct": "B"
    }
  ]
}</code></pre></div>

        <h4>POST /api/v1/teacher/homework</h4>
        <p>Create new homework assignment (Teacher only).</p>
        <div class="code"><pre><code>POST /api/v1/teacher/homework
Authorization: Bearer &lt;jwt_token&gt;
Content-Type: application/json

{
  "name": "Chemistry Lab Report",
  "description": "Complete the acid-base titration experiment",
  "subjectId": "chemistry_subject_id",
  "classId": "class_id",
  "dateOf": "2024-01-20",
  "optionA": "Complete lab procedure",
  "optionB": "Partial completion",
  "optionC": "Incorrect methodology",
  "optionD": "Not attempted",
  "correct": "A"
}

Response:
{
  "success": true,
  "homework": { ... }
}</code></pre></div>

        <h4>GET /api/v1/student/homework</h4>
        <p>Get homework assignments for student's classes.</p>
        <div class="code"><pre><code>GET /api/v1/student/homework
Authorization: Bearer &lt;jwt_token&gt;

Response:
{
  "success": true,
  "homework": [
    {
      "id": "homework_id",
      "name": "Math Quiz",
      "subjectId": "math_subject_id",
      "classId": "class_id",
      "dateOf": "2024-01-15T00:00:00.000Z",
      "submitted": false
    }
  ]
}</code></pre></div>

        <h2><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 11H5a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2h-4m-5 0V9a3 3 0 1 1 6 0v2M9 11a3 3 0 1 1 6 0"/></svg> Exam Management</h2>

        <h4>GET /api/v1/teacher/exams</h4>
        <p>Get exams for teacher's subjects.</p>
        <div class="code"><pre><code>GET /api/v1/teacher/exams
Authorization: Bearer &lt;jwt_token&gt;

Response:
{
  "success": true,
  "exams": [
    {
      "id": "exam_id",
      "name": "Mid-term Mathematics",
      "totalMark": 100,
      "subjectId": "math_subject_id",
      "classId": "class_id",
      "dateOf": "2024-01-25T00:00:00.000Z",
      "marks": {
        "student_id_1": {
          "mark": 85,
          "submittedAt": "2024-01-25T10:30:00.000Z",
          "submittedBy": "teacher_id"
        }
      }
    }
  ]
}</code></pre></div>

        <h4>POST /api/v1/teacher/exams</h4>
        <p>Create new exam (Teacher only).</p>
        <div class="code"><pre><code>POST /api/v1/teacher/exams
Authorization: Bearer &lt;jwt_token&gt;
Content-Type: application/json

{
  "name": "Final Physics Exam",
  "totalMark": 100,
  "subjectId": "physics_subject_id",
  "classId": "class_id",
  "dateOf": "2024-02-15"
}

Response:
{
  "success": true,
  "exam": { ... }
}</code></pre></div>

        <h4>PUT /api/v1/teacher/exams/:examId/marks</h4>
        <p>Submit student marks for exam (Teacher only).</p>
        <div class="code"><pre><code>PUT /api/v1/teacher/exams/:examId/marks
Authorization: Bearer &lt;jwt_token&gt;
Content-Type: application/json

{
  "studentId": "student_id",
  "mark": 92
}

Response:
{
  "success": true,
  "message": "Mark submitted successfully"
}</code></pre></div>

        <h2><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v4M6 6l-2 2M18 6l2 2M12 22v-4M6 18l-2-2M18 18l2-2M2 12h4M18 12h4"/></svg> Task Management</h2>

        <h4>GET /api/v1/tasks</h4>
        <p>Get all tasks for organization.</p>
        <div class="code"><pre><code>GET /api/v1/tasks
Authorization: Bearer &lt;jwt_token&gt;

Response:
{
  "success": true,
  "tasks": [
    {
      "id": "task_id",
      "title": "Update Student Records",
      "description": "Review and update student information",
      "status": "InProgress",
      "priority": "High",
      "assignee": "user_id",
      "createdBy": "admin_id",
      "dueDate": "2024-01-30T00:00:00.000Z",
      "tags": ["administration", "urgent"]
    }
  ]
}</code></pre></div>

        <h4>POST /api/v1/tasks</h4>
        <p>Create new task.</p>
        <div class="code"><pre><code>POST /api/v1/tasks
Authorization: Bearer &lt;jwt_token&gt;
Content-Type: application/json

{
  "title": "Grade Assignments",
  "description": "Review and grade submitted homework",
  "priority": "Normal",
  "assignee": "teacher_id",
  "dueDate": "2024-01-20",
  "tags": ["grading", "homework"]
}

Response:
{
  "success": true,
  "task": { ... }
}</code></pre></div>

        <h4>PUT /api/v1/tasks/:taskId</h4>
        <p>Update task status and information.</p>
        <div class="code"><pre><code>PUT /api/v1/tasks/:taskId
Authorization: Bearer &lt;jwt_token&gt;
Content-Type: application/json

{
  "status": "Close",
  "priority": "Low"
}

Response:
{
  "success": true,
  "message": "Task updated successfully"
}</code></pre></div>

        <h2><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 7h-4M8 7H4M16 17h-4M8 17H4M12 7v10M7 12h10"/></svg> Chat & Communication</h2>

        <h4>GET /api/v1/chats</h4>
        <p>Get user's chat conversations.</p>
        <div class="code"><pre><code>GET /api/v1/chats
Authorization: Bearer &lt;jwt_token&gt;

Response:
{
  "success": true,
  "chats": [
    {
      "id": "chat_id",
      "participants": ["user_id_1", "user_id_2"],
      "lastMessage": {
        "text": "Hello, how are you?",
        "sender": "user_id_1",
        "createdAt": "2024-01-15T10:30:00.000Z"
      },
      "unreadCount": 2
    }
  ]
}</code></pre></div>

        <h4>GET /api/v1/messages/:chatId</h4>
        <p>Get messages for specific chat.</p>
        <div class="code"><pre><code>GET /api/v1/messages/:chatId
Authorization: Bearer &lt;jwt_token&gt;

Response:
{
  "success": true,
  "messages": [
    {
      "id": "message_id",
      "message": { "text": "Hello!" },
      "sender": {
        "id": "user_id",
        "firstName": "John",
        "lastName": "Doe"
      },
      "chat": "chat_id",
      "createdAt": "2024-01-15T10:30:00.000Z",
      "messageType": "text"
    }
  ]
}</code></pre></div>

        <h2><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v4M6 6l-2 2M18 6l2 2M12 22v-4M6 18l-2-2M18 18l2-2M2 12h4M18 12h4"/></svg> Attendance Management</h2>

        <h4>GET /api/v1/teacher/attendance</h4>
        <p>Get attendance records for teacher's classes.</p>
        <div class="code"><pre><code>GET /api/v1/teacher/attendance?date=2024-01-15
Authorization: Bearer &lt;jwt_token&gt;

Response:
{
  "success": true,
  "attendance": [
    {
      "id": "attendance_id",
      "date": "2024-01-15T00:00:00.000Z",
      "studentId": "student_id",
      "classId": "class_id",
      "status": "present",
      "markedBy": "teacher_id"
    }
  ]
}</code></pre></div>

        <h4>POST /api/v1/teacher/attendance</h4>
        <p>Mark attendance for class (Teacher only).</p>
        <div class="code"><pre><code>POST /api/v1/teacher/attendance
Authorization: Bearer &lt;jwt_token&gt;
Content-Type: application/json

{
  "date": "2024-01-15",
  "classId": "class_id",
  "attendance": [
    { "studentId": "student_1", "status": "present" },
    { "studentId": "student_2", "status": "absent" }
  ]
}

Response:
{
  "success": true,
  "message": "Attendance marked successfully"
}</code></pre></div>

        <h2><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6l3 3m0 0l3-3m-3 3V3m3 13l-3-3m0 0l-3 3m3-3v6"/></svg> Payment Integration</h2>

        <h4>POST /api/v1/webhooks/stripe</h4>
        <p>Stripe webhook endpoint (No authentication required - validated via signature).</p>
        <div class="code"><pre><code>POST /api/v1/webhooks/stripe
Content-Type: application/json
Stripe-Signature: signature_header

{
  "id": "evt_1234567890",
  "object": "event",
  "type": "invoice.payment_succeeded",
  "data": {
    "object": {
      "customer": "cus_1234567890",
      "amount_paid": 2999,
      "currency": "usd"
    }
  }
}

Response:
{
  "received": true
}</code></pre></div>

        <h4>GET /api/v1/subscription/status</h4>
        <p>Get organization subscription status.</p>
        <div class="code"><pre><code>GET /api/v1/subscription/status
Authorization: Bearer &lt;jwt_token&gt;

Response:
{
  "success": true,
  "subscription": {
    "tier": "high_school",
    "status": "active",
    "maxUsers": 500,
    "features": ["basic", "standard", "chat", "attendance", "exams", "homework", "analytics"],
    "nextBilling": "2024-02-15T00:00:00.000Z"
  }
}</code></pre></div>

        <h2><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg> AI Services</h2>

        <h4>POST /api/v1/ai/detect-person</h4>
        <p>AI-powered person detection in images.</p>
        <div class="code"><pre><code>POST /api/v1/ai/detect-person
Authorization: Bearer &lt;jwt_token&gt;
Content-Type: multipart/form-data

FormData:
- image: &lt;image_file&gt;

Response:
{
  "success": true,
  "detections": [
    {
      "class": "person",
      "score": 0.95,
      "bbox": [100, 200, 150, 300]
    }
  ]
}</code></pre></div>

        <h2><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg> File Upload</h2>

        <h4>POST /api/v1/upload</h4>
        <p>Upload files to AWS S3 storage.</p>
        <div class="code"><pre><code>POST /api/v1/upload
Authorization: Bearer &lt;jwt_token&gt;
Content-Type: multipart/form-data

FormData:
- file: &lt;file_to_upload&gt;
- type: "profile" | "assignment" | "resource"

Response:
{
  "success": true,
  "fileUrl": "https://s3.amazonaws.com/bucket/file.jpg",
  "fileName": "uploaded_file.jpg"
}</code></pre></div>

        <h4>GET /api/v1/upload/url</h4>
        <p>Generate pre-signed upload URL for direct S3 upload.</p>
        <div class="code"><pre><code>GET /api/v1/upload/url?fileName=example.jpg&fileType=image/jpeg
Authorization: Bearer &lt;jwt_token&gt;

Response:
{
  "success": true,
  "uploadUrl": "https://s3.amazonaws.com/...",
  "fileUrl": "https://s3.amazonaws.com/bucket/example.jpg"
}</code></pre></div>

        <h2><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg> Error Handling</h2>

        <p>All API endpoints follow consistent error response format:</p>

        <div class="code"><pre><code>Error Response:
{
  "success": false,
  "message": "Error description",
  "error": "ERROR_CODE",
  "details": { ... } // Optional additional error information
}</code></pre></div>

        <h3>Common HTTP Status Codes</h3>
        <ul>
          <li><strong>200 OK:</strong> Successful request</li>
          <li><strong>201 Created:</strong> Resource successfully created</li>
          <li><strong>400 Bad Request:</strong> Invalid request parameters</li>
          <li><strong>401 Unauthorized:</strong> Missing or invalid authentication</li>
          <li><strong>403 Forbidden:</strong> Insufficient permissions</li>
          <li><strong>404 Not Found:</strong> Resource not found</li>
          <li><strong>422 Unprocessable Entity:</strong> Validation errors</li>
          <li><strong>500 Internal Server Error:</strong> Server error</li>
        </ul>

        <h3>Rate Limiting</h3>
        <p>API endpoints are protected with rate limiting. Exceeding limits returns:</p>
        <div class="code"><pre><code>HTTP 429 Too Many Requests
{
  "success": false,
  "message": "Too many requests",
  "retryAfter": 60
}</code></pre></div>

        <div class="callout success">
          <strong><svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg> API Best Practices:</strong>
          <ul>
            <li>Always include JWT token in Authorization header for authenticated endpoints</li>
            <li>Handle errors gracefully and check response.success field</li>
            <li>Use appropriate HTTP status codes for different error types</li>
            <li>Implement proper error logging and monitoring</li>
            <li>Cache responses where appropriate to reduce server load</li>
            <li>Validate all input data on both client and server side</li>
          </ul>
        </div>

        <div style="text-align: center; margin: 2rem 0;">
          <a href="./technical-overview.html" class="btn">Technical Overview →</a>
          <a href="./env-setup.html" class="btn secondary">Environment Setup →</a>
        </div>
      </section>
    </main>
  </body>
</html>
